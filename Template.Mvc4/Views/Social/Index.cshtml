@model IEnumerable<Template.Mvc4.Models.Contact>
@{
  ViewBag.Title = "Knockout Contacts";
}
@{if (false)
  {
  <script src="/Content/lib/jquery/jquery-1.7.1.min.js" type="text/javascript"></script> 
  }
}
<br />
<br />
@Html.Partial("_triggers")
<hr />
@Html.Partial("_calendar")

@section pageScripts
{
  <script type="text/javascript">
    var uvOptions = {};
    (function () {
      var uv = document.createElement('script'); uv.type = 'text/javascript'; uv.async = true;
      uv.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'widget.uservoice.com/6cxBBqmFm47ZPVCoPayw.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(uv, s);
    })();
  </script>
  <script src="/Views/_Scripts/ko-protected-observable.js" type="text/javascript"></script>
  <script src="/Views/_Scripts/CrudHelpers.js" type="text/javascript"></script>
  <script src="/Views/_Scripts/date.js" type="text/javascript"></script>
  <script src="/Content/lib/knockout/knockout-2.0.0.js" type="text/javascript"></script>
  <script src="/Content/lib/knockout/knockout-mapping.js" type="text/javascript"></script>
  <script src="@Url.Content("~/Views/_Scripts/CrudHelpers.js")" type="text/javascript"></script>
  <script src="@Url.Content("~/Views/Social/social.js")" type="text/javascript"> </script>
  <script type="text/javascript">
    $(function () {
      setupViewModel();
      processDom();
    });

    var processDom = function () {
      $('.tabs').tabs();
      $(document).on("click", '.summary', function () {
        $(this.parentNode).children('.details').toggle('fast');
      });
      $('input.date').datepicker();
    }
    var setupViewModel = function () {
      var data = testUtils.getPageData();
      var viewModel = new TriggersViewModel(data);
      ko.applyBindings(viewModel);
    }
  </script>
}
