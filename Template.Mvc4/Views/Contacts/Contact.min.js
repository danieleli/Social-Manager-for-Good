(function(){$(function(){var a;$("#contactDialog").hide();a="/api/contacts";return $.getJSON(a,function(b){var c;c={contacts:ko.observableArray(ko.toProtectedObservableItemArray(b)),contactToAddFirst:ko.observable(""),contactToAddLast:ko.observable(""),selectedContact:ko.observable(null),addContact:function(){var d;d={FirstName:this.contactToAddFirst(),LastName:this.contactToAddLast()};this.contactToAddFirst("");this.contactToAddLast("");return CrudHelpers.ajaxAdd(a+"",ko.toJSON(d),function(e){return c.contacts.push(new ko.protectedObservableItem(e))})},selectContact:function(){return c.selectedContact(this)}};$(document).on("click",".contact-delete",function(){var d;d=ko.dataFor(this);return CrudHelpers.ajaxDelete(a,c.selectedContact().Id().toString(),function(e){c.contacts.remove(d);return humane(e)})});$(document).on("click",".contact-edit",function(){return $("#contactDialog").dialog({buttons:{Save:function(){var d,e;c.selectedContact().commit();e=c.selectedContact();e.ModifyDate=void 0;d=e.Id();$(this).dialog("close");return CrudHelpers.ajaxUpdate(a+"/"+d,ko.toJSON(e),function(f){return humane("Contact Id: "+f.Id+" updated.")})},Cancel:function(){return $(this).dialog("close")}},width:500,title:"Edit Contact"})});return ko.applyBindings(c)})})}).call(this);